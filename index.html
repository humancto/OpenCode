<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Human CTO">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collaborative Code Editor</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/images/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-touch-icon-152x152.png">
    <link rel="icon" type="image/png" sizes="196x196" href="/images/favicon/favicon-196x196.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/images/favicon/favicon-128x128.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">

    <!-- styling -->
    <!-- Custom style -->
    <link rel="stylesheet" href="/styles/main.css">
    <!-- Enhanced UI styles -->
    <link rel="stylesheet" href="/styles/enhanced-ui.css">
    <!-- Firepad -->
    <link rel="stylesheet" href="https://cdn.firebase.com/libs/firepad/1.4.0/firepad.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- scripts -->
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/3.5.2/firebase.js"></script>
    <script src="/lib/firebase-sdk.js"></script>
    <!-- ACE and its JavaScript mode and theme files - Updated to latest -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.33.2/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.33.2/ext-language_tools.js"></script>
    <!-- Firepad -->
    <script src="https://cdn.firebase.com/libs/firepad/1.4.0/firepad.min.js"></script>
    <!-- Code Executor -->
    <script src="/scripts/code-executor.js"></script>
    <!-- Authentication -->
    <script src="/scripts/auth.js"></script>
  </head>
  <body>
    <!-- Landing Modal -->
    <div id="landingModal" class="modal">
      <div class="modal-content landing-content">
        <h2>Collaborative Code Editor</h2>
        <p class="subtitle">Interview Platform</p>
        
        <div class="role-selection">
          <div class="role-card" id="candidateCard">
            <div class="role-icon">üë®‚Äçüíª</div>
            <h3>Join as Candidate</h3>
            <p>Join an interview session with a session code</p>
            <button class="role-btn candidate-btn">I'm a Candidate</button>
          </div>
          
          <div class="role-divider"></div>
          
          <div class="role-card" id="adminCard">
            <div class="role-icon">üëî</div>
            <h3>Login as Interviewer</h3>
            <p>Create and manage interview sessions</p>
            <button class="role-btn admin-btn">I'm an Interviewer</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Candidate Join Modal -->
    <div id="candidateModal" class="modal" style="display: none;">
      <div class="modal-content">
        <button class="back-btn" id="candidateBack">‚Üê Back</button>
        <h2>Join Interview Session</h2>
        <p class="modal-subtitle">Enter your details to join the session</p>
        
        <div class="form-group">
          <label>Your Name</label>
          <input type="text" id="candidateName" placeholder="Enter your full name" maxlength="50">
        </div>
        
        <div class="form-group">
          <label>Session Code</label>
          <input type="text" id="candidateSessionCode" placeholder="6-digit code (e.g., 123456)" maxlength="6">
          <small>Your interviewer will provide this code</small>
        </div>
        
        <button id="candidateJoinBtn" class="primary-btn" disabled>Join Session</button>
      </div>
    </div>
    
    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="modal" style="display: none;">
      <div class="modal-content">
        <button class="back-btn" id="adminLoginBack">‚Üê Back</button>
        <h2>Interviewer Login</h2>
        <p class="modal-subtitle">Login to create and manage sessions</p>
        
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="adminEmail" placeholder="Enter your email">
        </div>
        
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="adminPassword" placeholder="Enter your password">
        </div>
        
        <button id="adminLoginBtn" class="primary-btn">Login</button>
        <div id="loginError" class="error-message" style="display: none;"></div>
      </div>
    </div>
    
    <!-- Admin Dashboard Modal -->
    <div id="adminDashboardModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="dashboard-header">
          <h2>Interviewer Dashboard</h2>
          <button id="adminLogoutBtn" class="logout-btn">Logout</button>
        </div>
        
        <div class="session-management">
          <h3>Session Management</h3>
          
          <div class="action-buttons">
            <button id="createSessionBtn" class="primary-btn">
              <span>+ Create New Session</span>
            </button>
            
            <div class="divider">
              <span>OR</span>
            </div>
            
            <div class="join-existing">
              <input type="text" id="adminSessionCode" placeholder="Enter session code" maxlength="6">
              <button id="adminJoinBtn" class="secondary-btn">Join Existing</button>
            </div>
          </div>
          
          <div id="activeSession" class="active-session" style="display: none;">
            <h4>Active Session</h4>
            <div class="session-info">
              <p>Session Code: <strong id="activeSessionCode"></strong></p>
              <button id="copyCodeBtn" class="copy-btn">Copy Code</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Editor Interface -->
    <div id="main-container" style="display: none;">
      <!-- Top Bar -->
      <div id="top-bar">
        <div class="left-controls">
          <select id="language-selector">
            <option value="javascript">JavaScript</option>
            <option value="python">Python</option>
            <option value="java">Java</option>
            <option value="c_cpp">C/C++</option>
            <option value="csharp">C#</option>
            <option value="php">PHP</option>
            <option value="ruby">Ruby</option>
            <option value="go">Go</option>
            <option value="rust">Rust</option>
            <option value="typescript">TypeScript</option>
            <option value="swift">Swift</option>
            <option value="kotlin">Kotlin</option>
            <option value="html">HTML</option>
            <option value="css">CSS</option>
            <option value="sql">SQL</option>
            <option value="markdown">Markdown</option>
          </select>
          
          <select id="theme-selector">
            <option value="monokai">Monokai</option>
            <option value="github">GitHub</option>
            <option value="tomorrow">Tomorrow</option>
            <option value="twilight">Twilight</option>
            <option value="solarized_dark">Solarized Dark</option>
            <option value="solarized_light">Solarized Light</option>
            <option value="textmate">TextMate</option>
            <option value="terminal">Terminal</option>
          </select>

          <select id="fontSize-selector">
            <option value="12">12px</option>
            <option value="14" selected>14px</option>
            <option value="16">16px</option>
            <option value="18">18px</option>
            <option value="20">20px</option>
          </select>
        </div>

        <div class="center-info">
          <span id="session-info"></span>
          <span id="user-count" class="user-count"></span>
        </div>

        <div class="right-controls">
          <div id="users-list"></div>
          <button id="run-btn" class="run-button">‚ñ∂ Run</button>
          <button id="share-btn">Share</button>
        </div>
      </div>

      <!-- Editor Container with Split View -->
      <div id="editor-wrapper">
        <div id="split-container">
          <div id="firepad-container"></div>
          <div id="output-panel" style="display: none;">
            <div id="output-header">
              <span>Output</span>
              <button id="clear-output">Clear</button>
              <button id="close-output">√ó</button>
            </div>
            <div id="output-content">
              <pre id="output-text"></pre>
            </div>
            <div id="input-section" style="display: none;">
              <label>Input (stdin):</label>
              <textarea id="stdin-input" placeholder="Enter input for your program..."></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Status Bar -->
      <div id="status-bar">
        <span id="cursor-position">Line 1, Column 1</span>
        <span id="connection-status" class="connected">Connected</span>
      </div>
    </div>

    <script src="/scripts/firepad.js"></script>
    <script src="/scripts/language-selector.js"></script>
    <script src="/scripts/ui-enhancements.js"></script>
    <script src="/scripts/app.js"></script>
  </body>
</html>
